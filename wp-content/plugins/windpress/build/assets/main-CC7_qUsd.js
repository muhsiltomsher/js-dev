import{T as De,a as Me,c as ze}from"./runtime-dom.esm-bundler-SWbJClE-.min.js";import{l as ee}from"./logger-BTW-zIW3.js";import{L as Fe,_ as Ue,a as Be,G as Re,R as He}from"./chevron-right-bXPiVCYa.min.js";import{uni as te,uniIframe as Xe}from"./constant-V9Qf7smn.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.min.js";import{ab as I,r as ae,ar as Ye,aD as G,_ as d,a1 as u,Z as b,al as T,j as h,u as L,a3 as Ge,V as _,w as V,am as se,au as D,Y as C,$ as M,F as z,a0 as F,a2 as K,aj as Ke,X as Ze,aE as Je}from"./runtime-core.esm-bundler-B8D91691.min.js";import{d as Ne}from"./vfs-CGMWRCWv.js";import"./index-CPcXZEQS.min.js";import{__tla as Qe}from"./cssesc-Bxt4z7kp.js";import"./index-D2oXBU75.min.js";import{__tla as et}from"./index-DZy_r9vz.min.js";import{g as tt}from"./intellisense-B87CzYZg.js";import"./redaxios.module-D8m3meIN.min.js";import{l as at}from"./design-system-BJspW4yc.js";import{u as st}from"./index-WnsJJ9SK.min.js";import{s as lt}from"./set-CCCCRWsb.min.js";import"./floating-ui.core-BNw6frD8.min.js";import"./isObject-K1YoVIH1.min.js";import"./chunk-HTB5LLOP-Cay67bh1.min.js";import"./preload-helper-OxAS765g.min.js";import"./source-map-generator-DjbDy59a.min.js";import"./index-CgqXENQe.min.js";import"./index-BAMY2Nnw.min.js";import"./index-BkiRcEwW.min.js";import"./pre-process-CANs1e39.js";import"./_toKey-DplO3CuX.min.js";Promise.all([(()=>{try{return Qe}catch{}})(),(()=>{try{return et}catch{}})()]).then(async()=>{const le={id:"windpressbuilderius-variable-app-header",class:"header-container bg:$(primary-1) cursor:grab bb:1|solid|$(primary-3)"},re={class:"header-content flex gap:10 align-items:center fg:$(base-2)"},ne={class:"header-logo flex px:12 py:2 align-items:center"},ie={class:"header-title text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},oe={__name:"PanelHeader",setup(s){const l=I("variableApp"),r=I("isOpen");function c(){const a=l.querySelector("#windpressbuilderius-variable-app-header");let t=_(!1),i=0,p=0;V(t,g=>{g?(document.body.style.userSelect="none",te.style.pointerEvents="none",a.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),te.style.removeProperty("pointer-events"),a.style.cursor="grab")});const o=g=>{t.value=!0;const w=a.getBoundingClientRect();i=g.clientX-w.left,p=g.clientY-w.top};a.removeEventListener("mousedown",o),a.addEventListener("mousedown",o);const $=g=>{if(!t.value)return;const w=a.getBoundingClientRect(),j=g.clientX,v=g.clientY,n=j-i,y=v-p,k=n<0?0:n>window.innerWidth-w.width?window.innerWidth-w.width:n,E=y<0?0:y>window.innerHeight-w.height?window.innerHeight-w.height:y;l.style.left=`${k}px`,l.style.top=`${E}px`};document.removeEventListener("mousemove",$),document.addEventListener("mousemove",$);const P=g=>{t.value=!1};document.removeEventListener("mouseup",P),document.addEventListener("mouseup",P)}return ae(()=>{c()}),(a,t)=>{const i=Ye("inline-svg"),p=Ue,o=G("tooltip");return u(),d("div",le,[b("div",re,[b("div",ne,[h(i,{src:L(Fe),class:"inline-svg fill:current font:24"},null,8,["src"])]),T((u(),d("div",ie,t[1]||(t[1]=[Ge(" WindPress ")]))),[[o,{placement:"top",content:`v${a.windpressbuilderius._version}`}]]),T((u(),d("button",{class:"uniPanelIconButton header-exit r:0 bg:$(primary-3):hover py:10 px:12",onClick:t[0]||(t[0]=$=>r.value=!L(r))},[h(p,{class:"iconify fg:$(base-2) font:16"})])),[[o,{placement:"top",content:"Close"}]])])])}}},ce=S(oe,[["__scopeId","data-v-4197d510"]]),ue={class:"header-slot flex-grow:1"},pe={key:0,class:"expansion-panel__body"},de={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(s,{expose:l}){const r=s,c=_(null),a=st(`windpressbuilderius-variable-app.ui.expansion-panels.${r.namespace}`,{[`${r.name}`]:!1},void 0,{mergeDefaults:!0});function t(p){a.value[r.name]=p===null?!a.value[r.name]:p}function i(){c.value.scrollIntoView()}return l({togglePanel:t,scrollIntoView:i}),(p,o)=>{const $=Be;return u(),d("div",{ref_key:"sectionRef",ref:c,class:"expansion-panel mx:10 py:8"},[b("div",{class:"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer",onClick:o[0]||(o[0]=P=>L(a)[s.name]=!L(a)[s.name])},[b("div",ue,[se(p.$slots,"header",{},void 0,!0)]),b("div",null,[h($,{style:D({transform:L(a)[s.name]?"rotate(-90deg)":"rotate(0deg)"}),class:"iconify ~duration:300 font:18"},null,8,["style"])])]),h(De,null,{default:C(()=>[L(a)[s.name]?(u(),d("div",pe,[se(p.$slots,"default",{},void 0,!0)])):M("",!0)]),_:3})],512)}}},U=S(de,[["__scopeId","data-v-ca3cf9eb"]]),ve={class:"{m:10;pb:15}>div"},me={class:"variable-section-title font:14 my:10"},ye={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},be=["onClick","onMouseenter"],fe={class:"font:14"},ge={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(s){return(l,r)=>{const c=G("tooltip");return u(),d("div",ve,[(u(!0),d(z,null,F(s.variableItems,(a,t)=>(u(),d("div",{key:t,class:"var-item"},[b("div",me,K(t.replace("_","-")),1),b("div",ye,[a.length>0?(u(!0),d(z,{key:0},F(a,(i,p)=>T((u(),d("button",{key:p,class:"px:12 py:8 r:8 fg:$(base-1) fg:$(accent-normal):hover bg:$(primary-3) bg:$(primary-2):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span",onClick:o=>l.$emit("previewChose",o,i.key),onMouseenter:o=>l.$emit("previewEnter",o,i.key),onMouseleave:r[0]||(r[0]=o=>l.$emit("previewLeave"))},[b("span",fe,K(i.label),1)],40,be)),[[c,{placement:"top",content:`var(${i.key}, ${i.value})`}]])),128)):M("",!0)])]))),128))])}}},Z=S(ge,[["__scopeId","data-v-188b1ad4"]]),he={class:"{m:10;pb:15}>div"},we={class:"variable-section-title font:14 my:10"},ke={key:0,class:"variable-section-items default-color"},_e=["onClick","onMouseenter"],$e=["onClick","onMouseenter"],Ee={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(s){return(l,r)=>{const c=G("tooltip");return u(),d("div",he,[(u(!0),d(z,null,F(s.variableItems,(a,t)=>(u(),d("div",{key:t,class:""},[b("div",we,K(t),1),a.DEFAULT?(u(),d("div",ke,[T(b("button",{class:Ke([`bg:$(${a.DEFAULT.key.slice(2)})`,"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer"]),style:D(`--wp-b-v-item-bg: var(--${a.DEFAULT.key.slice(2)});`),onClick:i=>l.$emit("previewChose",i,a.DEFAULT.key),onMouseenter:i=>l.$emit("previewEnter",i,a.DEFAULT.key),onMouseleave:r[0]||(r[0]=i=>l.$emit("previewLeave"))},null,46,_e),[[c,{placement:"top",content:`var(${a.DEFAULT.key}, ${a.DEFAULT.value})`}]])])):M("",!0),a.shades&&Object.keys(a.shades).length>0?(u(),d("div",{key:1,style:D(`--wp-b-v-items-grid: ${Object.keys(a.shades).length}`),class:"variable-section-items shades-colors grid r:4 overflow:hidden"},[(u(!0),d(z,null,F(a.shades,(i,p)=>(u(),d("div",{key:p,class:"flex gap:10"},[T(b("button",{style:D(`--wp-b-v-item-bg: var(--${i.key.slice(2)})`),class:"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer",onClick:o=>l.$emit("previewChose",o,i.key),onMouseenter:o=>l.$emit("previewEnter",o,i.key),onMouseleave:r[1]||(r[1]=o=>l.$emit("previewLeave"))},null,44,$e),[[c,{placement:"top",content:`var(${i.key}, ${i.value})`}]])]))),128))],4)):M("",!0)]))),128))])}}},xe=S(Ee,[["__scopeId","data-v-a1f5a2af"]]),Ce={id:"windpressbuilderius-variable-app-body",class:"var-body rel w:full h:full overflow-y:scroll! bb:1|solid|$(primary-3)>div:not(:last-child)"},Pe=1e3,Ie={__name:"PanelBody",setup(s){const l=_({colors:{},typography:{},sizing:{}}),r=I("focusedInput"),c=I("recentVariableSelectionTimestamp"),a=I("tempInputValue"),t=I("variableApp");async function i(){const v=Xe.contentWindow.document.querySelector('script#windpress\\:vfs[type="text/plain"]'),n=Ne(v.textContent),y=await tt(await at({volume:n}));let k=t.querySelector("style#windpressbuilderius-variable-app-body-style");k||(k=document.createElement("style"),k.id="windpressbuilderius-variable-app-body-style",t.appendChild(k)),k.innerHTML=`
        #windpressbuilderius-variable-app-body {
            ${y.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;const E={};y.filter(e=>e.key.startsWith("--color")).forEach(e=>{const m=e.key.slice(8),X=m.split("-");let Y="";if(X.length>1){const qe=X[0],Ve=X.slice(1).join("-");Y=`${qe}.shades.'${Ve}'`}else Y=`${m}.DEFAULT`;lt(E,Y,e)}),l.value.colors=Object.keys(E).sort().reduce((e,m)=>(e[m]=E[m],e),{});const f={font_size:[],line_height:[],letter_spacing:[]};y.filter(e=>e.key.startsWith("--text-")&&!e.key.endsWith("--line-height")).forEach(e=>{const m=e.key.slice(7);f.font_size.push({key:e.key,label:m,value:e.value})}),y.filter(e=>e.key.startsWith("--leading-")||e.key.endsWith("--leading")).forEach(e=>{const m=e.key.startsWith("--leading-")?e.key.slice(10):e.key.slice(2,-9);f.line_height.push({key:e.key,label:m,value:e.value})}),f.line_height.sort((e,m)=>e.label.startsWith("font-size-")&&!m.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&m.label.startsWith("font-size-")?-1:0),y.filter(e=>e.key.startsWith("--tracking-")).forEach(e=>{const m=e.key.slice(11);f.letter_spacing.push({key:e.key,label:m,value:e.value})}),l.value.typography=f;const H={container:[],breakpoint:[]};y.filter(e=>e.key.startsWith("--container-")).forEach(e=>{const m=e.key.slice(12);H.container.push({key:e.key,label:m,value:e.value})}),y.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const m=e.key.slice(13);H.breakpoint.push({key:e.key,label:m,value:e.value})}),l.value.sizing=H}const p=_(null),o=_(null),$=_(null);V(r,v=>{if(v){const n=v.getAttribute("name"),y=["color","backgroundColor"].some(f=>n.includes(f)),k=["fontSize"].some(f=>n.includes(f)),E=["padding","margin","gap","width","height"].some(f=>n.includes(f));o.value.togglePanel(!1),$.value.togglePanel(!1),p.value.togglePanel(!1),y?(p.value.togglePanel(!0),p.value.scrollIntoView()):k?(o.value.togglePanel(!0),o.value.scrollIntoView()):E&&($.value.togglePanel(!0),$.value.scrollIntoView())}});function P(v,n){const y=Object.getOwnPropertyDescriptor(v,"value").set,k=Object.getPrototypeOf(v),E=Object.getOwnPropertyDescriptor(k,"value").set;y&&y!==E?E.call(v,n):y.call(v,n);const f=new Event("input",{bubbles:!0});v.dispatchEvent(f)}function g(v,n){performance.now()-c.value<Pe||r.value&&P(r.value,`var(${n})`)}function w(v){!r.value||a.value===null||P(r.value,a.value)}function j(v,n){r.value&&(P(r.value,`var(${n})`),a.value=`var(${n})`,c.value=performance.now())}return ae(()=>{i()}),new BroadcastChannel("windpress").addEventListener("message",async v=>{const n=v.data;n.source==="windpress/intellisense"&&n.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{i()},1e3)}),(v,n)=>(u(),d("div",Ce,[h(U,{ref_key:"sectionColor",ref:p,namespace:"variable",name:"color"},{header:C(()=>n[0]||(n[0]=[b("span",{class:"var-body-title"},"Color",-1)])),default:C(()=>[h(xe,{"variable-items":l.value.colors,onPreviewEnter:g,onPreviewLeave:w,onPreviewChose:j},null,8,["variable-items"])]),_:1},512),h(U,{ref_key:"sectionTypography",ref:o,namespace:"variable",name:"typography"},{header:C(()=>n[1]||(n[1]=[b("span",{class:"var-body-title"},"Typography",-1)])),default:C(()=>[h(Z,{"variable-items":l.value.typography,onPreviewEnter:g,onPreviewLeave:w,onPreviewChose:j},null,8,["variable-items"])]),_:1},512),h(U,{ref_key:"sectionSpacing",ref:$,namespace:"variable",name:"spacing",class:""},{header:C(()=>n[2]||(n[2]=[b("span",{class:"var-body-title"},"Sizing",-1)])),default:C(()=>[h(Z,{"variable-items":l.value.sizing,onPreviewEnter:g,onPreviewLeave:w,onPreviewChose:j},null,8,["variable-items"])]),_:1},512)]))}},Le=S(Ie,[["__scopeId","data-v-a7b2a30e"]]),Se={id:"windpressbuilderius-variable-app-container",class:"flex flex:column w:full h:full fg:$(base-2) bg:$(primary-1)"},Te={__name:"App",setup(s){const l=I("isOpen");return(r,c)=>T((u(),d("div",Se,[h(ce),(u(),Ze(Je,null,{default:C(()=>[h(Le)]),_:1}))],512)),[[Me,L(l)]])}},We=S(Te,[["__scopeId","data-v-1cedf206"]]);function Ae({selector:s,callback:l,options:r}){const c=new MutationObserver(l),a=document.querySelector(s);if(!a){ee(`Target not found for selector: ${s}`,{module:"variable-picker",type:"error"});return}const t={childList:!0,subtree:!0};c.observe(a,Object.assign(Object.assign({},t),r))}const W=document.createElement("windpressbuilderius-variable-app");W.id="windpressbuilderius-variable-app",document.body.appendChild(W);for(const s of document.getElementById("builderius-builder-css").sheet.cssRules)if(s.selectorText&&s.selectorText.includes("#builderiusPanel"))for(let l=0;l<s.style.length;l++){const r=s.style[l];r.startsWith("--")&&W.style.setProperty(r,s.style.getPropertyValue(r).trim())}const A=_(!1),O=_(null),q=_(null),Oe=_(0),B=_(null),x=ze(We);x.config.globalProperties.windpressbuilderius=window.windpressbuilderius,x.provide("variableApp",W),x.provide("isOpen",A),x.provide("focusedInput",O),x.provide("tempInputValue",q),x.provide("recentVariableSelectionTimestamp",Oe),x.use(Re,{container:"#windpressbuilderius-variable-app"}),x.component("InlineSvg",He),x.mount("#windpressbuilderius-variable-app");function J(s){var l;!s.shiftKey||!s.target||((l=document==null?void 0:document.getSelection())==null||l.removeAllRanges(),s.preventDefault(),s.stopPropagation(),O.value=s.target,q.value=s.target.value,A.value=!0)}function N(s){O.value=s.target}const je=["div.uniCssInput","div.uniCssColorpicker"];function Q(){setTimeout(()=>{var r;let s=!1;je.forEach(c=>{(typeof c=="string"?[...document.querySelectorAll(c)]:[...document.querySelectorAll(c.selector)].filter(a=>c.hasChild.some(t=>a.querySelector(t)))).forEach(a=>{const t=a.querySelector("input[type='text']");(t==null?void 0:t.getAttribute("windpressbuilderius-variable-app"))!=="listened"&&(t==null||t.removeEventListener("click",J),t==null||t.addEventListener("click",J),t==null||t.removeEventListener("focus",N),t==null||t.addEventListener("focus",N),t==null||t.setAttribute("windpressbuilderius-variable-app","listened"),s=!0)})});const l=document.querySelector("div.uniSystemSelectClasses__valueWrapper span.uniSystemSelectClasses__placeholder")?"%root%":(r=document.querySelector("div.uniSystemSelectClasses__valueWrapper div.uniModuleCssSelectorItemSelected span"))==null?void 0:r.innerText;B.value!==l&&(B.value=l),s&&(O.value=null,q.value=null)},100)}let R=!1;Ae({selector:".uniLeftPanelOuter",options:{subtree:!0,childList:!0},callback(){R||(R=!0,Q(),setTimeout(()=>{R=!1},100))}}),Q(),document.addEventListener("keydown",s=>{s.key==="Escape"&&A.value&&(A.value=!1)}),V(A,s=>{W.style.zIndex=s?"calc(Infinity)":"-1"}),V(B,(s,l)=>{s!==l&&(O.value=null,q.value=null)}),ee("Module loaded!",{module:"variable-picker"})});
